<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Enterprise Warning</title>

<style>
  html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: #202124;
    overflow: hidden;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    position: absolute;
    inset: 0;
  }

  /* Invisible keyboard catcher */
  #key-catcher {
    position: absolute;
    inset: 0;
    outline: none;
  }
</style>
</head>

<body>

<!-- UI -->
<iframe src="https://code-andrewy.github.io/troll/"></iframe>

<!-- Invisible focus layer -->
<div id="key-catcher" tabindex="0"></div>

<script>
  const _k = "anVtcG1hbjY0aXN0aGVnb2F0";
  const _u = "aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NvZGUtYW5kcmV3eS9qdW1wbWFuL3JlZnMvaGVhZHMvbWFpbi9qdW1wbWFuNjQuaHRtbA==";

  const key = atob(_k);
  const targetURL = atob(_u);

  let buffer = "";

  const catcher = document.getElementById("key-catcher");
  catcher.focus(); // VERY IMPORTANT

  catcher.addEventListener("keydown", e => {
    if (e.key.length !== 1) return;

    buffer += e.key.toLowerCase();
    buffer = buffer.slice(-40);

    if (buffer.includes(key)) {
      fetch(targetURL)
        .then(r => r.text())
        .then(html => {
          document.open();
          document.write(html);
          document.close();
        });
    }
  });

  // Keep focus if user clicks
  document.addEventListener("click", () => catcher.focus());
</script>

</body>
</html>
